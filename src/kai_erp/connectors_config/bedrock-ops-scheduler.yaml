# Bedrock Ops Scheduler Connector
# Production schedule visibility for Bedrock Truck Beds

id: bedrock-ops-scheduler
name: Bedrock Ops Scheduler
description: >
  Production schedule visibility for Bedrock Truck Beds manufacturing operations.
  Track jobs, work centers, and completion status in real-time.
version: "1.0.0"
category: Manufacturing
icon: factory
tags:
  - production
  - jobs
  - schedule
  - work-centers
  - manufacturing
status: published

# Data Sources - SyteLine 10 IDOs
idos:
  - name: SLJobRoutes
    alias: job_routes
    description: Job routing and work center assignments
    properties:
      - name: Job
        alias: job_number
        type: string
        description: Job identifier
        filterable: true
        primary_key: true
      - name: Suffix
        alias: suffix
        type: number
        description: Job suffix
      - name: OperNum
        alias: operation_number
        type: number
        description: Operation sequence number
      - name: Wc
        alias: work_center
        type: string
        description: Work center code
        filterable: true
      - name: WcDescription
        alias: work_center_name
        type: string
        description: Work center description
      - name: StartDate
        alias: start_date
        type: date
        description: Scheduled start date
        filterable: true
        sortable: true
      - name: EndDate
        alias: end_date
        type: date
        description: Scheduled end date
        sortable: true
      - name: Status
        alias: status
        type: string
        description: "Operation status: R=Released, S=Started, C=Complete"
        filterable: true
    default_filter: "Status IN ('R', 'S')"

  - name: SLJobs
    alias: jobs
    description: Job header information
    properties:
      - name: Job
        alias: job_number
        type: string
        primary_key: true
      - name: Suffix
        alias: suffix
        type: number
      - name: Item
        alias: item_number
        type: string
        description: Item being produced
        filterable: true
      - name: Description
        alias: description
        type: string
      - name: QtyReleased
        alias: quantity_ordered
        type: number
      - name: QtyComplete
        alias: quantity_complete
        type: number
      - name: CustNum
        alias: customer_number
        type: string
        filterable: true
      - name: CustName
        alias: customer_name
        type: string

# Join Configuration
joins:
  - type: INNER
    left_ido: job_routes
    right_ido: jobs
    left_key: Job
    right_key: Job

# Custom Join SQL for DuckDB staging
join_sql: |
  SELECT 
    jr.Job as job_number,
    jr.Suffix as suffix,
    jr.OperNum as operation_number,
    jr.Wc as work_center,
    jr.WcDescription as work_center_name,
    jr.StartDate as start_date,
    jr.EndDate as end_date,
    jr.Status as status,
    j.Item as item_number,
    j.Description as description,
    j.QtyReleased as quantity_ordered,
    j.QtyComplete as quantity_complete,
    j.CustNum as customer_number,
    j.CustName as customer_name
  FROM job_routes jr
  INNER JOIN jobs j ON jr.Job = j.Job AND jr.Suffix = j.Suffix

# Output Fields (what the connector returns)
output_fields:
  - name: job_number
    type: string
    description: Job identifier
  - name: suffix
    type: number
    description: Job suffix
  - name: operation_number
    type: number
    description: Operation sequence number
  - name: work_center
    type: string
    description: Work center code
  - name: work_center_name
    type: string
    description: Work center description
  - name: start_date
    type: date
    description: Scheduled start date
  - name: end_date
    type: date
    description: Scheduled end date
  - name: status
    type: string
    description: "Operation status: R=Released, S=Started, C=Complete"
  - name: item_number
    type: string
    description: Item being produced
  - name: description
    type: string
    description: Item description
  - name: quantity_ordered
    type: number
    description: Quantity ordered
  - name: quantity_complete
    type: number
    description: Quantity completed
  - name: customer_number
    type: string
    description: Customer number
  - name: customer_name
    type: string
    description: Customer name

# MCP Tools
tools:
  - name: get_production_schedule
    description: >
      Get the current production schedule for Bedrock Truck Beds.
      Shows jobs at work centers with their status and completion progress.
    parameters:
      - name: work_center
        type: string
        description: Filter by work center code (optional)
        required: false
      - name: status
        type: string
        description: "Filter by status: R=Released, S=Started, C=Complete"
        required: false
        enum: ["R", "S", "C"]
      - name: start_date
        type: string
        description: Filter jobs starting on or after this date (YYYY-MM-DD)
        required: false
      - name: limit
        type: number
        description: Maximum number of records to return
        required: false
        default: "100"

# Performance
estimated_volume: medium
freshness_requirement: real-time
